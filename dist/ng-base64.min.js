!function(a){"use strict";if(!a)return void console.log("angularjs is required");var b=function(a){var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c={encodeFromStr:function(c){var d,e,f,g,h,i=a.defer(),j="",k="",l="",m=0;do d=c.charCodeAt(m++),e=c.charCodeAt(m++),k=c.charCodeAt(m++),f=d>>2,g=(3&d)<<4|e>>4,h=(15&e)<<2|k>>6,l=63&k,console.log("chr1, chr2, chr3",d,e,k),isNaN(e)?h=l=64:isNaN(k)&&(l=64),console.log("enc1,enc2,enc3,enc4",f,g,h,l),j=j+b.charAt(f)+b.charAt(g)+b.charAt(h)+b.charAt(l),d=e=k="",f=g=h=l="";while(m<c.length);return i.resolve(j),i.promise},decodeStr:function(c){var d,e,f,g,h,i=a.defer(),j="",k="",l="",m=0,n=/[^A-Za-z0-9\+\/\=]/g;if(n.exec(c)){var o='There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, "+", "/",and "="\nExpect errors in decoding.';return i.reject(o),i.promise}c=c.replace(/[^A-Za-z0-9\+\/\=]/g,"");do f=b.indexOf(c.charAt(m++)),g=b.indexOf(c.charAt(m++)),h=b.indexOf(c.charAt(m++)),l=b.indexOf(c.charAt(m++)),d=f<<2|g>>4,e=(15&g)<<4|h>>2,k=(3&h)<<6|l,j+=String.fromCharCode(d),64!==h&&(j+=String.fromCharCode(e)),64!==l&&(j+=String.fromCharCode(k)),d=e=k="",f=g=h=l="";while(m<c.length);return i.resolve(j),i.promise},encodeFromBlobAsync:function(b,c){var d=a.defer(),e=new FileReader;return e.onload=function(){var a=e.result,b=a.split(",")[1];"function"!=typeof c?d.resolve(b):c(b)},e.readAsDataURL(b),"function"!=typeof c?d.promise:void 0},decodeBlob:function(b){for(var c,d=a.defer(),e=atob(b.split(",")[1]),f=b.split(",")[0].split(":")[1].split(";")[0],g=new ArrayBuffer(e.length),h=new Uint8Array(g),i=0;i<e.length;i++)h[i]=e.charCodeAt(i);try{c=new Blob([g],{type:f})}catch(j){if(window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,"TypeError"===j.name&&window.BlobBuilder){var k=new BlobBuilder;k.append(g),c=k.getBlob(f)}else"InvalidStateError"===j.name?c=new Blob([g],{type:f}):(c=!1,d.reject("Error: blob constructor is not supported"))}return c?d.resolve(c):d.reject("Failed to decode"),d.promise}};return c};a.module("ng-base64",[]).service("Base64",["$q",b])}(window.angular);