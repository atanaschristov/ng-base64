!function(a){"use strict";if(!a)return void console.log("angularjs is required");var b=function(a){var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c={encodeStr:function(c){var d,e,f,g,h,i=a.defer(),j="",k="",l="",m=0;do d=c.charCodeAt(m++),e=c.charCodeAt(m++),k=c.charCodeAt(m++),f=d>>2,g=(3&d)<<4|e>>4,h=(15&e)<<2|k>>6,l=63&k,isNaN(e)?h=l=64:isNaN(k)&&(l=64),j=j+b.charAt(f)+b.charAt(g)+b.charAt(h)+b.charAt(l),d=e=k="",f=g=h=l="";while(m<c.length);return i.resolve(j),i.promise},decodeStr:function(c){var d,e,f,g,h,i=a.defer(),j="",k="",l="",m=0,n=/[^A-Za-z0-9\+\/\=]/g;if(n.exec(c)){var o='There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, "+", "/",and "="\n';return i.reject(o),i.promise}c=c.replace(/[^A-Za-z0-9\+\/\=]/g,"");do f=b.indexOf(c.charAt(m++)),g=b.indexOf(c.charAt(m++)),h=b.indexOf(c.charAt(m++)),l=b.indexOf(c.charAt(m++)),d=f<<2|g>>4,e=(15&g)<<4|h>>2,k=(3&h)<<6|l,j+=String.fromCharCode(d),64!==h&&(j+=String.fromCharCode(e)),64!==l&&(j+=String.fromCharCode(k)),d=e=k="",f=g=h=l="";while(m<c.length);return i.resolve(j),i.promise},encodeBlob:function(b,c){var d=a.defer(),e=new FileReader;e.onload=function(){var a=e.result,b=a.split(",")[1];"function"!=typeof c?d.resolve(b):c(null,b)};try{e.readAsDataURL(b)}catch(f){if("function"!=typeof c)return d.reject(f),d.promise;c(f,null)}return"function"!=typeof c?d.promise:void 0},decodeBlob:function(b){var c,d,e,f=a.defer();if("string"!=typeof b)return f.reject("Wrong format"),f.promise;var g=b.split(",");g.length>1?(e=atob(g[1]),d=g[0].split(":")[1].split(";")[0]):e=atob(g[0]);for(var h=new ArrayBuffer(e.length),i=new Uint8Array(h),j=0;j<e.length;j++)i[j]=e.charCodeAt(j);try{c=new Blob([h],{type:d})}catch(k){if(window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,"TypeError"===k.name&&window.BlobBuilder){var l=new BlobBuilder;l.append(h),c=l.getBlob(d)}else{if("InvalidStateError"!==k.name)return c=!1,f.reject("Error: blob constructor is not supported"),f.promise;c=new Blob([h],{type:d})}}return f.resolve(c),f.promise}};return c};a.module("ng-base64",[]).service("Base64",["$q",b])}(window.angular);